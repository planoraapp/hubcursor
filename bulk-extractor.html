<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Extrator em Lote - Habbo Templários</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .input-group { margin: 20px 0; }
        textarea { width: 100%; height: 150px; border: 2px solid #ddd; border-radius: 5px; padding: 10px; }
        button { padding: 12px 24px; margin: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .results { margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 5px; }
        .category { margin: 10px 0; padding: 15px; background: #e9ecef; border-radius: 5px; }
        .stats { display: flex; gap: 20px; margin: 10px 0; }
        .stat { background: #007bff; color: white; padding: 10px; border-radius: 5px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Extrator em Lote - Habbo Templários</h1>
        
        <div class="input-group">
            <h3>📋 Cole o HTML da categoria:</h3>
            <textarea id="htmlInput" placeholder="Cole aqui o HTML da categoria..."></textarea>
            <button onclick="extractData()">🔍 Extrair Dados</button>
            <button onclick="clearAll()">🗑️ Limpar</button>
            <button onclick="exportAll()">💾 Exportar Tudo</button>
        </div>
        
        <div class="results">
            <h3>📊 Resultados Extraídos:</h3>
            <div id="extractedData"></div>
        </div>
        
        <div class="results">
            <h3>💾 Dados para Copiar:</h3>
            <textarea id="copyData" readonly placeholder="Dados extraídos aparecerão aqui..." style="height: 300px;"></textarea>
            <button onclick="copyToClipboard()">📋 Copiar</button>
        </div>
    </div>

    <script>
        let allExtractedData = {};
        
        function extractData() {
            const html = document.getElementById('htmlInput').value;
            if (!html) return;
            
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            const categories = {};
            
            // Extrair dados de cada div (nonhc, hc, sell)
            ['nonhc', 'hc', 'sell'].forEach(category => {
                const div = doc.querySelector(`#${category}`);
                if (div) {
                    const items = [];
                    div.querySelectorAll('a[data-clothing]').forEach(link => {
                        const clothing = link.getAttribute('data-clothing');
                        const figure = link.style.backgroundImage.match(/figure=([^&]+)/)?.[1];
                        if (clothing && figure) {
                            items.push({ id: clothing, figure: figure });
                        }
                    });
                    categories[category] = items;
                }
            });
            
            // Adicionar aos dados globais
            const categoryName = detectCategoryName(html);
            allExtractedData[categoryName] = categories;
            
            displayResults();
            generateCopyData();
        }
        
        function detectCategoryName(html) {
            if (html.includes('hd-')) return 'head';
            if (html.includes('hr-')) return 'hair';
            if (html.includes('ha-')) return 'hats';
            if (html.includes('ch-')) return 'shirts';
            if (html.includes('lg-')) return 'pants';
            if (html.includes('sh-')) return 'shoes';
            if (html.includes('ea-')) return 'eyeAccessories';
            if (html.includes('ca-')) return 'necklaces';
            if (html.includes('wa-')) return 'waist';
            return 'unknown';
        }
        
        function displayResults() {
            const container = document.getElementById('extractedData');
            let html = '';
            
            Object.entries(allExtractedData).forEach(([category, data]) => {
                html += `<div class="category">`;
                html += `<h4>🎯 ${category.toUpperCase()}</h4>`;
                
                let totalItems = 0;
                Object.entries(data).forEach(([rarity, items]) => {
                    totalItems += items.length;
                });
                
                html += `<div class="stats">`;
                html += `<div class="stat">Total: ${totalItems}</div>`;
                Object.entries(data).forEach(([rarity, items]) => {
                    html += `<div class="stat">${rarity.toUpperCase()}: ${items.length}</div>`;
                });
                html += `</div>`;
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
        }
        
        function generateCopyData() {
            const container = document.getElementById('copyData');
            let data = '// Dados extraídos automaticamente do Habbo Templários\n';
            data += 'const HABBO_TEMPLARIOS_DATA = {\n';
            
            Object.entries(allExtractedData).forEach(([category, categoryData]) => {
                data += `    ${category}: {\n`;
                Object.entries(categoryData).forEach(([rarity, items]) => {
                    data += `        ${rarity}: [\n`;
                    items.forEach(item => {
                        data += `            { id: '${item.id}', figure: '${item.figure}' },\n`;
                    });
                    data += `        ],\n`;
                });
                data += `    },\n`;
            });
            
            data += '};\n\n';
            data += '// Total de itens extraídos: ' + getTotalItems() + '\n';
            
            container.value = data;
        }
        
        function getTotalItems() {
            let total = 0;
            Object.values(allExtractedData).forEach(categoryData => {
                Object.values(categoryData).forEach(items => {
                    total += items.length;
                });
            });
            return total;
        }
        
        function exportAll() {
            if (Object.keys(allExtractedData).length === 0) {
                alert('Nenhum dado foi extraído ainda!');
                return;
            }
            
            const dataStr = document.getElementById('copyData').value;
            const dataBlob = new Blob([dataStr], {type: 'text/javascript'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'habbo-templarios-data.js';
            link.click();
        }
        
        function clearAll() {
            document.getElementById('htmlInput').value = '';
            document.getElementById('extractedData').innerHTML = '';
            document.getElementById('copyData').value = '';
            allExtractedData = {};
        }
        
        function copyToClipboard() {
            const textarea = document.getElementById('copyData');
            textarea.select();
            document.execCommand('copy');
            alert('Dados copiados para a área de transferência!');
        }
    </script>
</body>
</html>
