<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Investigador HabboTemplarios - HabboHub</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .investigator-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
        }
        .results {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="investigator-container">
        <h1>üîç Investigador HabboTemplarios</h1>
        <p>Este investigador analisa o site do HabboTemplarios para extrair as categorias e roupas reais.</p>
        
        <div class="section">
            <h3>üìã M√©todos de Investiga√ß√£o</h3>
            <p>Escolha como quer investigar o site:</p>
            
            <button onclick="openHabboTemplarios()">üåê Abrir HabboTemplarios</button>
            <button onclick="analyzeIframe()">üîç Analisar Iframe (se dispon√≠vel)</button>
            <button onclick="simulateUserNavigation()">üë§ Simular Navega√ß√£o do Usu√°rio</button>
            <button onclick="extractFromConsole()">üì± Extrair do Console F12</button>
            <button onclick="analyzeNetworkRequests()">üåê Analisar Requisi√ß√µes de Rede</button>
        </div>
        
        <div class="section">
            <h3>üéØ Resultados da Investiga√ß√£o</h3>
            <div id="investigationResults" class="results">
                Clique em um m√©todo para come√ßar a investiga√ß√£o...
            </div>
        </div>
        
        <div class="section">
            <h3>üìä Dados Extra√≠dos</h3>
            <div id="extractedData" class="results">
                Nenhum dado extra√≠do ainda...
            </div>
        </div>
        
        <div class="section">
            <h3>üåê Preview do Site (Iframe)</h3>
            <div id="iframeContainer">
                <p>Clique em "Abrir HabboTemplarios" para carregar o iframe...</p>
            </div>
        </div>
    </div>

    <script>
        let investigationData = {};
        
        // Fun√ß√£o para abrir o HabboTemplarios em iframe
        function openHabboTemplarios() {
            console.log('üåê === ABRINDO HABBOTEMPLARIOS ===');
            
            const container = document.getElementById('iframeContainer');
            container.innerHTML = `
                <iframe 
                    src="https://habbotemplarios.com/generador-de-habbos" 
                    id="habboTemplariosFrame"
                    onload="onIframeLoaded()"
                ></iframe>
            `;
            
            updateResults('‚úÖ Iframe do HabboTemplarios carregado! Aguarde o carregamento completo...');
        }
        
        // Quando o iframe carregar
        function onIframeLoaded() {
            console.log('üéØ Iframe carregado!');
            updateResults('üéØ Iframe carregado com sucesso! Agora podemos analisar o conte√∫do.');
            
            // Aguardar um pouco para o conte√∫do carregar
            setTimeout(() => {
                analyzeIframe();
            }, 3000);
        }
        
        // Analisar o conte√∫do do iframe
        function analyzeIframe() {
            console.log('üîç === ANALISANDO IFRAME ===');
            
            try {
                const iframe = document.getElementById('habboTemplariosFrame');
                if (!iframe || !iframe.contentDocument) {
                    updateResults('‚ùå N√£o foi poss√≠vel acessar o conte√∫do do iframe (CORS)');
                    return;
                }
                
                const doc = iframe.contentDocument;
                console.log('üìÑ Documento do iframe:', doc);
                
                // Procurar por elementos de roupas
                const clothingElements = doc.querySelectorAll('[class*="clothing"], [class*="item"], [class*="grid"]');
                console.log('üëï Elementos de roupas encontrados:', clothingElements.length);
                
                // Procurar por categorias
                const categoryElements = doc.querySelectorAll('[class*="category"], [class*="tab"], [class*="section"]');
                console.log('üìÇ Elementos de categoria encontrados:', categoryElements.length);
                
                // Procurar por scripts que carregam dados
                const scripts = doc.querySelectorAll('script');
                console.log('üìú Scripts encontrados:', scripts.length);
                
                updateResults(`üîç An√°lise do iframe conclu√≠da:
                - Elementos de roupas: ${clothingElements.length}
                - Elementos de categoria: ${categoryElements.length}
                - Scripts: ${scripts.length}
                
                Verifique o console para mais detalhes.`);
                
            } catch (error) {
                console.error('‚ùå Erro ao analisar iframe:', error);
                updateResults(`‚ùå Erro ao analisar iframe: ${error.message}`);
            }
        }
        
        // Simular navega√ß√£o do usu√°rio
        function simulateUserNavigation() {
            console.log('üë§ === SIMULANDO NAVEGA√á√ÉO DO USU√ÅRIO ===');
            
            updateResults('üë§ Simulando navega√ß√£o do usu√°rio...');
            
            // Lista de URLs para investigar
            const urlsToInvestigate = [
                'https://habbotemplarios.com/generador-de-habbos',
                'https://habbotemplarios.com/api/clothes',
                'https://habbotemplarios.com/api/categories',
                'https://habbotemplarios.com/js/clothes.js',
                'https://habbotemplarios.com/js/categories.js'
            ];
            
            // Tentar acessar cada URL
            urlsToInvestigate.forEach((url, index) => {
                setTimeout(() => {
                    investigateURL(url);
                }, index * 1000);
            });
        }
        
        // Investigar uma URL espec√≠fica
        async function investigateURL(url) {
            try {
                console.log(`üîç Investigando: ${url}`);
                
                const response = await fetch(url);
                const contentType = response.headers.get('content-type');
                
                if (contentType && contentType.includes('application/json')) {
                    const data = await response.json();
                    console.log(`‚úÖ JSON encontrado em ${url}:`, data);
                    updateResults(`‚úÖ JSON encontrado em ${url}: ${JSON.stringify(data).substring(0, 200)}...`);
                    
                    // Salvar dados extra√≠dos
                    investigationData[url] = data;
                    updateExtractedData();
                    
                } else if (contentType && contentType.includes('text/html')) {
                    const html = await response.text();
                    console.log(`‚úÖ HTML encontrado em ${url}:`, html.substring(0, 500));
                    updateResults(`‚úÖ HTML encontrado em ${url} (${html.length} caracteres)`);
                    
                    // Procurar por dados de roupas no HTML
                    extractClothingDataFromHTML(html, url);
                    
                } else {
                    console.log(`‚ÑπÔ∏è Conte√∫do n√£o reconhecido em ${url}: ${contentType}`);
                    updateResults(`‚ÑπÔ∏è Conte√∫do n√£o reconhecido em ${url}: ${contentType}`);
                }
                
            } catch (error) {
                console.log(`‚ùå Erro ao investigar ${url}:`, error.message);
                updateResults(`‚ùå Erro ao investigar ${url}: ${error.message}`);
            }
        }
        
        // Extrair dados de roupas do HTML
        function extractClothingDataFromHTML(html, url) {
            console.log('üîç === EXTRAINDO DADOS DE ROUPAS DO HTML ===');
            
            // Procurar por padr√µes comuns de dados de roupas
            const patterns = [
                /clothingData\s*=\s*(\{.*?\});/gs,
                /clothes\s*=\s*(\[.*?\]);/gs,
                /categories\s*=\s*(\[.*?\]);/gs,
                /items\s*=\s*(\[.*?\]);/gs,
                /data-clothing="([^"]+)"/g,
                /data-category="([^"]+)"/g
            ];
            
            patterns.forEach((pattern, index) => {
                const matches = html.match(pattern);
                if (matches) {
                    console.log(`üéØ Padr√£o ${index + 1} encontrado:`, matches);
                    updateResults(`üéØ Padr√£o ${index + 1} encontrado em ${url}: ${matches.length} matches`);
                    
                    // Tentar fazer parse dos dados
                    matches.forEach((match, matchIndex) => {
                        if (matchIndex > 0 && match) { // Ignorar o match completo
                            try {
                                const parsed = JSON.parse(match);
                                console.log(`‚úÖ Dados parseados do padr√£o ${index + 1}:`, parsed);
                                investigationData[`pattern_${index}_${matchIndex}`] = parsed;
                                updateExtractedData();
                            } catch (e) {
                                console.log(`‚ö†Ô∏è N√£o foi poss√≠vel fazer parse: ${match.substring(0, 100)}...`);
                            }
                        }
                    });
                }
            });
        }
        
        // Extrair dados do console F12
        function extractFromConsole() {
            console.log('üì± === EXTRAINDO DO CONSOLE F12 ===');
            
            updateResults('üì± Para extrair dados do console F12:
            
            1. Abra o site do HabboTemplarios
            2. Pressione F12 para abrir as ferramentas do desenvolvedor
            3. V√° para a aba Console
            4. Procure por mensagens relacionadas a roupas, categorias ou dados
            5. Copie e cole aqui os dados encontrados
            
            Dica: Procure por vari√°veis como:
            - clothingData
            - clothes
            - categories
            - items
            - console.log de roupas');
            
            // Criar √°rea para colar dados
            const container = document.getElementById('extractedData');
            container.innerHTML = `
                <h4>üìã Cole aqui os dados do console:</h4>
                <textarea 
                    id="consoleDataInput" 
                    placeholder="Cole aqui os dados encontrados no console F12..."
                    style="width: 100%; height: 200px; font-family: monospace;"
                ></textarea>
                <br><br>
                <button onclick="parseConsoleData()">üîç Analisar Dados Colados</button>
            `;
        }
        
        // Analisar dados colados do console
        function parseConsoleData() {
            const input = document.getElementById('consoleDataInput');
            const data = input.value.trim();
            
            if (!data) {
                updateResults('‚ùå Nenhum dado foi colado!');
                return;
            }
            
            console.log('üîç === ANALISANDO DADOS COLADOS ===');
            console.log('Dados colados:', data);
            
            try {
                // Tentar fazer parse como JSON
                const parsed = JSON.parse(data);
                console.log('‚úÖ Dados parseados com sucesso:', parsed);
                
                investigationData['console_data'] = parsed;
                updateExtractedData();
                updateResults('‚úÖ Dados do console parseados e salvos!');
                
            } catch (error) {
                console.log('‚ö†Ô∏è N√£o √© JSON v√°lido, tentando extrair padr√µes...');
                
                // Tentar extrair padr√µes do texto
                extractClothingDataFromHTML(data, 'console_data');
                updateResults('‚ö†Ô∏è Dados n√£o s√£o JSON v√°lido, mas padr√µes foram extra√≠dos.');
            }
        }
        
        // Analisar requisi√ß√µes de rede
        function analyzeNetworkRequests() {
            console.log('üåê === ANALISANDO REQUISI√á√ïES DE REDE ===');
            
            updateResults('üåê Para analisar requisi√ß√µes de rede:
            
            1. Abra o site do HabboTemplarios
            2. Pressione F12 para abrir as ferramentas do desenvolvedor
            3. V√° para a aba Network
            4. Recarregue a p√°gina
            5. Procure por requisi√ß√µes que retornem dados de roupas
            6. Verifique as respostas das requisi√ß√µes
            
            Dica: Procure por:
            - Requisi√ß√µes para /api/
            - Requisi√ß√µes para arquivos .js
            - Requisi√ß√µes que retornem JSON
            - Requisi√ß√µes com nomes relacionados a roupas');
        }
        
        // Fun√ß√µes auxiliares
        function updateResults(message) {
            const results = document.getElementById('investigationResults');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `<br>[${timestamp}] ${message}`;
            results.scrollTop = results.scrollHeight;
        }
        
        function updateExtractedData() {
            const container = document.getElementById('extractedData');
            container.innerHTML = `
                <h4>üìä Dados Extra√≠dos (${Object.keys(investigationData).length} fontes):</h4>
                <pre>${JSON.stringify(investigationData, null, 2)}</pre>
            `;
        }
        
        // Inicializa√ß√£o
        console.log('üîç Investigador HabboTemplarios inicializado!');
        updateResults('üöÄ Sistema de investiga√ß√£o inicializado!');
    </script>
</body>
</html>
