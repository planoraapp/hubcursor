<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Simples - Categorias</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .category-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; margin: 15px 0; }
        .clothing-item { width: 60px; height: 60px; border: 2px solid #ccc; border-radius: 8px; overflow: hidden; }
        .clothing-item img { width: 100%; height: 100%; object-fit: contain; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>🧪 Teste Simples das Categorias</h1>
    
    <div class="test-section">
        <h3>1. Carregar Scripts</h3>
        <button onclick="loadScripts()">Carregar Scripts</button>
        <div id="scriptsStatus"></div>
    </div>
    
    <div class="test-section">
        <h3>2. Testar Categoria: <span id="currentCategory">head</span></h3>
        <button onclick="testCategory('head')">Cabeças</button>
        <button onclick="testCategory('hair')">Cabelos</button>
        <button onclick="testCategory('shirts')">Camisas</button>
        <button onclick="testCategory('pants')">Calças</button>
        <div id="categoryResult"></div>
    </div>
    
    <div class="test-section">
        <h3>3. Grid de Roupas</h3>
        <div id="clothingGrid" class="category-grid"></div>
    </div>

    <script>
        // Carregar scripts
        function loadScripts() {
            const status = document.getElementById('scriptsStatus');
            status.innerHTML = '🔄 Carregando scripts...';
            
            const scripts = [
                'config.js',
                'habbo-clothes-mapping.js',
                'script.js'
            ];
            
            let loadedCount = 0;
            
            scripts.forEach(script => {
                const scriptElement = document.createElement('script');
                scriptElement.src = script;
                scriptElement.onload = () => {
                    loadedCount++;
                    if (loadedCount === scripts.length) {
                        status.innerHTML = '✅ Scripts carregados com sucesso!';
                        status.className = 'success';
                        testCategory('head'); // Testar primeira categoria
                    }
                };
                scriptElement.onerror = () => {
                    status.innerHTML = `❌ Erro ao carregar: ${script}`;
                    status.className = 'error';
                };
                document.head.appendChild(scriptElement);
            });
        }
        
        // Testar categoria específica
        function testCategory(category) {
            const result = document.getElementById('categoryResult');
            const grid = document.getElementById('clothingGrid');
            const currentCategorySpan = document.getElementById('currentCategory');
            
            currentCategorySpan.textContent = category;
            result.innerHTML = '🔄 Testando categoria...';
            
            try {
                if (typeof generateClothingDataFromSwfs === 'function') {
                    const clothingData = generateClothingDataFromSwfs();
                    const categoryData = clothingData[category];
                    
                    if (categoryData) {
                        const totalItems = Object.values(categoryData).flat().length;
                        result.innerHTML = `✅ Categoria "${category}" encontrada com ${totalItems} itens totais`;
                        result.className = 'success';
                        
                        // Renderizar grid
                        renderClothingGrid(categoryData);
                    } else {
                        result.innerHTML = `❌ Categoria "${category}" não encontrada`;
                        result.className = 'error';
                        grid.innerHTML = '';
                    }
                } else {
                    result.innerHTML = '❌ Função generateClothingDataFromSwfs não disponível';
                    result.className = 'error';
                    grid.innerHTML = '';
                }
            } catch (error) {
                result.innerHTML = `❌ Erro: ${error.message}`;
                result.className = 'error';
                grid.innerHTML = '';
            }
        }
        
        // Renderizar grid de roupas
        function renderClothingGrid(categoryData) {
            const grid = document.getElementById('clothingGrid');
            grid.innerHTML = '';
            
            const sections = [
                { id: 'nonhc', title: 'Normais', items: categoryData.nonhc || [] },
                { id: 'hc', title: 'HC', items: categoryData.hc || [] },
                { id: 'sell', title: 'Vendáveis', items: categoryData.sell || [] },
                { id: 'nft', title: 'NFT', items: categoryData.nft || [] }
            ];
            
            sections.forEach(section => {
                if (section.items.length > 0) {
                    // Título da seção
                    const sectionTitle = document.createElement('h4');
                    sectionTitle.textContent = `${section.title} (${section.items.length})`;
                    sectionTitle.style.gridColumn = '1 / -1';
                    sectionTitle.style.margin = '20px 0 10px 0';
                    grid.appendChild(sectionTitle);
                    
                    // Itens da seção
                    section.items.forEach(item => {
                        const clothingItem = document.createElement('div');
                        clothingItem.className = 'clothing-item';
                        clothingItem.title = `${item.name} (${item.type})`;
                        
                        const img = document.createElement('img');
                        img.src = item.imageUrl || `https://www.habbo.com/habbo-imaging/avatarimage?figure=${item.figure}&gender=M&size=m`;
                        img.alt = item.name;
                        
                        img.onerror = () => {
                            clothingItem.innerHTML = `<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 10px; text-align: center;">${item.name.substring(0, 3)}</div>`;
                        };
                        
                        clothingItem.appendChild(img);
                        grid.appendChild(clothingItem);
                    });
                }
            });
        }
        
        // Carregar scripts automaticamente
        window.addEventListener('load', () => {
            loadScripts();
        });
    </script>
</body>
</html>
